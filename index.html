<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNN Predictor</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
</head>
<body>

<h1>KNN Predictor</h1>

<!-- Form to take user input -->
<form id="knnForm">
    <label for="feature1">Feature 1:</label>
    <input type="number" step="any" id="feature1" name="feature1" required>

    <label for="feature2">Feature 2:</label>
    <input type="number" step="any" id="feature2" name="feature2" required>

    <!-- Add more input fields as needed -->

    <label for="k">Number of Neighbors (k):</label>
    <input type="number" id="k" name="k" required>

    <button type="button" onclick="predict()">Predict</button>
</form>

<!-- Display area for the prediction result -->
<div id="predictionResult"></div>

<script>
    // Sample dataset
    const dataset = {
        features: tf.tensor2d([
            [1.0, 2.0],   // Example 1
            [2.0, 3.0],   // Example 2
            // Add more examples as needed
        ]),
        labels: tf.tensor1d([0, 1 /* Add more labels as needed */])
    };

    // KNN prediction function
    function predict() {
        const feature1 = parseFloat(document.getElementById("feature1").value);
        const feature2 = parseFloat(document.getElementById("feature2").value);
        const k = parseInt(document.getElementById("k").value);

        const input = tf.tensor2d([[feature1, feature2]]);
        const distances = dataset.features.sub(input).square().sum(1).sqrt();
        const topKIndices = distances.argTopK(k).dataSync();

        const topKLabels = Array.from(topKIndices, index => dataset.labels.dataSync()[index]);
        const predictedLabel = mode(topKLabels);

        document.getElementById("predictionResult").innerText = `Predicted Label: ${predictedLabel}`;
    }

    // Function to find the mode (most common) value in an array
    function mode(arr) {
        return arr.reduce((a, b, i, arr) =>
            (arr.filter(v => v === a).length >= arr.filter(v => v === b).length) ? a : b, null);
    }
</script>

</body>
</html>
